!function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";var r,i,n,o;s.r(e),function(t){t.CHART="chart",t.TABLE="table",t.DYNAMIC_DROPDOWN="dynamic-dropdown"}(r||(r={}));class a{constructor(t,e,s){this.id=t,this.type=e,this.meta=s}toJSON(){return{id:this.id,type:this.type,metadata:this.meta}}}class l extends a{constructor(t,e){super(t,r.CHART,e)}toJSON(){return super.toJSON()}}!function(t){t.MARKETPLACE="sales-dashboard-dd-mp",t.AUTHOR="sales-dashboard-dd-author",t.FORMAT="sales-dashboard-dd-book-type",t.TITLE="sales-dashboard-dd-asin",t.DATE_RANGE="sales-dashboard-date-range",t.UNITS_ORDERED_CHART="sales-dashboard-chart-orders",t.PAGE_READS_CHART="sales-dashboard-chart-ku"}(i||(i={})),function(t){t.UNITS_ORDERED="sales-dashboard-chart-orders"}(n||(n={}));class d{constructor(t,e){this.type=t,this.value=e}}class u extends d{constructor(t,e){super(t,e)}}class c{constructor(t,e){this.type="date-range",this.from=t,this.to=e}}class h{constructor(t,e,s,r,i,n){this.postAjax=t,this.target=e,this.requestType=s,this.customer="",this.locale=r,this.namespace="kdp",this.pageId=i,this.vendorCode="",this.time=new Date,this.requestId=n}fillUrlParams(t){t.set("post-ajax",JSON.stringify(this.postAjax)),t.set("target",JSON.stringify(this.target)),t.set("requesttype",this.requestType),t.set("customer",this.customer),t.set("locale",this.locale),t.set("namespace",this.namespace),t.set("pageid",this.pageId),t.set("vendorcode",this.vendorCode),t.set("time",this.time.getTime().toString()),t.set("request-id",this.requestId)}}class p{constructor(t,e){this.message=t,this.causedBy=e}toJSON(){return null===this.causedBy||void 0===this.causedBy?{message:this.message}:this}}class m extends p{constructor(t,e,s,r){super(t,r),this.value=e,this.mapFunc=s}}class f{constructor(t,e){this.value=t,this.error=e}isError(){return null!=this.error}isValue(){return null!=this.value}getError(){if(!this.isError())throw new p("attempted to get error from value Result");return this.error}getValue(){if(!this.isValue())throw new p("attempted to get value from error Result");return this.value}map(t){if(this.isError())return f.error(this.error);try{const e=t(this.value);return f.value(e)}catch(e){return f.error(new m("failed to map result value",this.value,t,e))}}flatMap(t){if(this.isError())return f.error(this.error);try{return t(this.value)}catch(e){return f.error(new m("failed to map result value",this.value,t,e))}}static error(t){if(null===t||void 0===t)throw new p("cannot pass null error to Result.error()");return new f(null,t)}static value(t){if(null===t||void 0===t)throw new p("cannot pass null value to Result.value()");return new f(t,null)}}!function(t){t.RENDER="render"}(o||(o={}));class y extends h{constructor(t,e,s,r){super(t,e,o.RENDER,s,"KDP_UI_OP",r)}}class w extends y{constructor(t,e,s,r,i,n,o,a,l){super(t,e,s,r),this.marketPlaceId=i,this.author=n,this.asin=o,this.reportDate=a,this.bookType=l}fillUrlParams(t){super.fillUrlParams(t),t.set("_filter_marketplaceId",JSON.stringify(this.marketPlaceId)),t.set("_filter_author",JSON.stringify(this.author)),t.set("_filter_asin",JSON.stringify(this.asin)),t.set("_filter_reportDate",JSON.stringify(this.reportDate)),t.set("_filter_book_type",JSON.stringify(this.bookType))}}class v extends w{constructor(t,e,s,r,i,n,o,a){super(t,e,s,"KDPGetLineChartKU_OP",r,i,n,o,a)}}class b extends p{constructor(t,e,s){super(t,s),this.rawValue=e}toJSON(){const t=super.toJSON();return t.rawValue=this.rawValue,t}}class g{constructor(t,e,s,r,i,n,o){this.action=t,this.data=e,this.isDownloadRequest=s,this.requestId=r,this.requestType=i,this.targetId=n,this.time=o}static fromResponseText(t){try{const e=JSON.parse(t);return e.hasOwnProperty("exception")?f.error(new b("exception response received",t)):f.value(new g(e.action,e.data,e.isDownloadRequest,e["request-id"],e.requesttype,e["target-id"],e.time))}catch(e){return f.error(new b("failed to parse raw api response",t,e))}}}class x extends HTMLDivElement{constructor(){super(),this.id=x.ID,this.style.position="absolute",this.style.width="800px",this.style.height="600px",this.style.marginTop="-300px",this.style.marginLeft="-400px",this.style.top="50vh",this.style.left="50vw",this.style.zIndex="9999",this.style.backgroundColor="#FFF",this.style.borderRadius="5px",this.style.borderWidth="1px",this.style.borderColor="#222",this.tabSet=new _,this.appendChild(this.tabSet)}}x.ID="fxcpds-float-pane",window.customElements.define("float-pane",x,{extends:"div"});class E extends HTMLUListElement{constructor(){super(),this.id=E.ID,this.style.cssFloat="left",this.style.display="inline-block",this.style.height="2em",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.marginTop="2em",this.appendChild(this.content)}}E.ID="fxcpds-tab-header-row",window.customElements.define("tab-header-row",E,{extends:"ul"});class _ extends HTMLDivElement{constructor(){super(),this.id=_.ID,this.headers=new E,this.placeholder=document.createElement("div"),this.style.position="relative",this.style.width="90%",this.appendChild(this.headers),this.appendChild(this.placeholder)}}_.ID="fxcpds-tab-set",window.customElements.define("tab-set",_,{extends:"div"});const O="https://kdp.amazon.com/en_US/reports-new/data",R=document.createElement("script");R.type="javascript",R.src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js",document.body.appendChild(R),function(t){const e=new URLSearchParams;new v([],[new l(i.PAGE_READS_CHART,"DATE")],"en_US",new u("dropdown",["_ALL"]),new u("dynamic-dropdown",["_ALL"]),new u("dynamic-dropdown",["_ALL"]),new c("2018-06-01","2018-07-01"),new u("dropdown",["_ALL"])).fillUrlParams(e);const s=new XMLHttpRequest;s.onreadystatechange=(()=>{s.readyState===XMLHttpRequest.DONE&&t(s)}),s.open("POST",O),s.send(e)}(t=>{console.log(g.fromResponseText(t.responseText))});const S=new x;S.tabSet.appendChild(document.createElement("li")),document.body.appendChild(S)}]);